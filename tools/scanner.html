<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<a href="../index.html">← Back to Home</a>
<title>Link to QR Code Generator</title>

<style>
/* Themes */
body.light-theme {
  background-color: #f0f0f0;
  color: #333;
}

body.dark-theme {
  background-color: #333;
  color: #f0f0f0;
}

body {
  font-family: Arial, sans-serif;
  text-align: center;
  padding: 50px;
  transition: background-color 0.3s ease, color 0.3s ease;
}

/* Inputs & buttons */
input, button {
  padding: 10px;
  font-size: 16px;
  margin-top: 20px;
}

#qrcode {
  margin-top: 20px;
}

#download-buttons {
  margin-top: 20px;
}

/* Top credit */
.credit-top {
  margin-top: -10px;
  margin-bottom: 25px;
  font-size: 14px;
  font-weight: bold;
  letter-spacing: 0.5px;
}

/* Credit color by theme */
body.light-theme .credit-top {
  color: #444;
}

body.dark-theme .credit-top {
  color: #ddd;
}
</style>
<link rel="stylesheet" href="../css/style.css">

</head>
<script src="../js/script.js"></script>

<body class="light-theme">

<h1>Convert Link to QR Code</h1>

<!-- CREDIT (TOP & CLEAR) -->
<div class="credit-top">
  © Rahul Negi 2024
</div>

<p>Enter any URL below to generate a QR code and download it in PNG or SVG.</p>

<input type="text" id="linkInput" placeholder="Enter your link here" size="40">
<br>
<button onclick="generateQRCode()">Generate QR Code</button>

<div id="qrcode"></div>

<div id="download-buttons" style="display:none;">
  <button onclick="downloadQRCode('png')">Download as PNG</button>
  <button onclick="downloadQRCode('svg')">Download as SVG</button>
</div>

<div>
  <h3>Theme:</h3>
  <select id="themeSelector" onchange="changeTheme()">
    <option value="light">Light</option>
    <option value="dark">Dark</option>
  </select>
</div>

<script src="https://cdnjs.cloudflare.com/ajax/libs/qrcodejs/1.0.0/qrcode.min.js"></script>

<script>
let qrCode;

function generateQRCode() {
  const link = document.getElementById("linkInput").value.trim();
  if (!link) {
    alert("Please enter a valid link!");
    return;
  }

  document.getElementById("qrcode").innerHTML = "";
  qrCode = new QRCode(document.getElementById("qrcode"), {
    text: link,
    width: 256,
    height: 256
  });

  document.getElementById("download-buttons").style.display = "block";
}

function downloadQRCode(format) {
  const canvas = document.querySelector("#qrcode canvas");
  if (!canvas) return;

  if (format === "png") {
    const pngUrl = canvas.toDataURL("image/png");
    const link = document.createElement("a");
    link.href = pngUrl;
    link.download = "qrcode.png";
    link.click();
  }

  if (format === "svg") {
    const svgData = `
    <svg xmlns="http://www.w3.org/2000/svg" width="256" height="256">
      <rect width="256" height="256" fill="white"/>
      <image href="${canvas.toDataURL()}" width="256" height="256"/>
    </svg>`;
    const blob = new Blob([svgData], { type: "image/svg+xml" });
    const url = URL.createObjectURL(blob);
    const link = document.createElement("a");
    link.href = url;
    link.download = "qrcode.svg";
    link.click();
  }
}

function changeTheme() {
  const theme = document.getElementById("themeSelector").value;
  document.body.className = theme + "-theme";
}
</script>

</body>
</html>
