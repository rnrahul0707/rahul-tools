<!doctype html>
<html lang="en">
<head>
<meta charset="utf-8" />
<meta name="viewport" content="width=device-width, initial-scale=1" />
<title>Contrast Checker</title>
<style>
  body{margin:0;font-family:Arial;background:#f4f4f4;color:#111}
  .wrap{max-width:1100px;margin:auto;padding:22px}
  .header{
    background:#fff;border:1px solid #e6e6e6;border-radius:14px;
    padding:14px 16px;display:flex;justify-content:space-between;align-items:center;gap:12px;flex-wrap:wrap;
    box-shadow:0 10px 25px rgba(0,0,0,.06)
  }
  .left{display:flex;align-items:center;gap:12px;flex-wrap:wrap}
  .btn{
    padding:10px 14px;border-radius:999px;border:1px solid #e6e6e6;background:#f3f3f3;
    cursor:pointer;font-weight:800;text-decoration:none;color:#111
  }
  .btn:hover{background:#ededed}
  .btn.primary{background:#000;color:#fff;border-color:#000}
  .btn.primary:hover{opacity:.92}
  h2{margin:0}
  .credit{font-weight:800;color:#666;font-size:13px}

  .grid{display:grid;grid-template-columns:1fr 1fr;gap:16px;margin-top:16px}
  @media (max-width:900px){.grid{grid-template-columns:1fr}}

  .card{
    background:#fff;border:1px solid #e6e6e6;border-radius:14px;
    padding:16px;box-shadow:0 10px 25px rgba(0,0,0,.06)
  }

  .row{display:flex;gap:12px;flex-wrap:wrap;align-items:center}
  .field{display:flex;flex-direction:column;gap:8px;min-width:220px}
  label{font-size:13px;font-weight:800;color:#333}
  .pickRow{display:flex;gap:10px;align-items:center;flex-wrap:wrap}
  input[type="color"]{width:56px;height:44px;border:0;background:none;padding:0}
  input[type="text"]{
    padding:12px 12px;border-radius:12px;border:1px solid #ddd;outline:none;
    font-weight:900;letter-spacing:.6px;text-transform:uppercase;width:150px
  }

  .ratio{
    font-size:44px;font-weight:900;letter-spacing:-1px;margin:4px 0 0 0
  }
  .small{color:#666;font-size:13px;font-weight:700;margin-top:4px}

  .badge{
    display:inline-flex;align-items:center;gap:8px;
    padding:8px 12px;border-radius:999px;border:1px solid #e6e6e6;
    font-weight:900;font-size:12px
  }
  .pass{background:#eaffea;border-color:#bfe8bf;color:#0b6b0b}
  .fail{background:#fff0f0;border-color:#f1b9b9;color:#8a0f0f}

  .table{width:100%;border-collapse:separate;border-spacing:0 10px;margin-top:12px}
  .table td{padding:10px 12px;background:#f7f7f7;border:1px solid #eee}
  .table td:first-child{border-radius:12px 0 0 12px}
  .table td:last-child{border-radius:0 12px 12px 0;text-align:right}

  .preview{
    border-radius:16px;border:1px solid rgba(0,0,0,.10);
    padding:18px;min-height:240px
  }
  .preview h1{margin:0 0 10px 0;font-size:34px}
  .preview p{margin:0 0 14px 0;line-height:1.6}
  .pillBtn{
    display:inline-block;padding:10px 14px;border-radius:999px;font-weight:900;border:0;cursor:pointer
  }

  .toast{
    position:fixed;top:16px;right:16px;background:#000;color:#fff;
    padding:10px 12px;border-radius:12px;font-weight:900;display:none;z-index:999
  }
</style>
</head>
<body>
<div class="wrap">

  <div class="header">
    <div class="left">
  <a href="../index.html">← Back to Home</a>

      <h2>Contrast Checker (WCAG)</h2>
    </div>
    <div class="row">
      <button class="btn" id="swapBtn">Swap</button>
      <button class="btn primary" id="copyBtn">Copy Result</button>
      <div class="credit">© Rahul Negi 2026</div>
    </div>
  </div>

  <div class="grid">
    <!-- Controls + Results -->
    <div class="card">
      <div class="row">
        <div class="field">
          <label>Text Color</label>
          <div class="pickRow">
            <input type="color" id="textColor" value="#111111">
            <input type="text" id="textHex" value="#111111" maxlength="7">
          </div>
        </div>

        <div class="field">
          <label>Background Color</label>
          <div class="pickRow">
            <input type="color" id="bgColor" value="#FCFCFC">
            <input type="text" id="bgHex" value="#FCFCFC" maxlength="7">
          </div>
        </div>
      </div>

      <div style="margin-top:14px;">
        <div class="small">Contrast Ratio</div>
        <div class="ratio" id="ratio">—</div>
        <div class="small" id="hint">Pick colors to see results</div>
      </div>

      <table class="table">
        <tr>
          <td><b>Normal Text</b> (AA 4.5 / AAA 7.0)</td>
          <td id="normalBadges"></td>
        </tr>
        <tr>
          <td><b>Large Text</b> (AA 3.0 / AAA 4.5)</td>
          <td id="largeBadges"></td>
        </tr>
      </table>

      <div style="margin-top:14px;" class="small">
        Tip: Large text = <b>18pt+</b> (or <b>14pt bold</b>).
      </div>
    </div>

    <!-- Preview -->
    <div class="card">
      <div class="preview" id="preview">
        <h1>Heading Preview</h1>
        <p>
          This is a paragraph preview. Designers use contrast to improve readability and accessibility.
          Try different colors to see AA/AAA pass or fail.
        </p>
        <button class="pillBtn" id="btnPreview">Button</button>
      </div>

      <div class="small" style="margin-top:10px;">
        Preview shows real usage: heading, paragraph & button.
      </div>
    </div>
  </div>
</div>

<div class="toast" id="toast">Copied ✅</div>

<script>
  const textColor = document.getElementById("textColor");
  const bgColor = document.getElementById("bgColor");
  const textHex = document.getElementById("textHex");
  const bgHex = document.getElementById("bgHex");

  const ratioEl = document.getElementById("ratio");
  const hintEl = document.getElementById("hint");
  const normalBadges = document.getElementById("normalBadges");
  const largeBadges = document.getElementById("largeBadges");

  const preview = document.getElementById("preview");
  const btnPreview = document.getElementById("btnPreview");

  const swapBtn = document.getElementById("swapBtn");
  const copyBtn = document.getElementById("copyBtn");
  const toast = document.getElementById("toast");

  function showToast(msg="Copied ✅"){
    toast.textContent = msg;
    toast.style.display = "block";
    clearTimeout(showToast._t);
    showToast._t = setTimeout(()=> toast.style.display="none", 900);
  }

  function normalizeHex(v){
    v = (v || "").trim().toUpperCase();
    if (!v.startsWith("#")) v = "#" + v;
    if (/^#[0-9A-F]{6}$/.test(v)) return v;
    return null;
  }

  function hexToRgb(hex){
    const r = parseInt(hex.slice(1,3),16);
    const g = parseInt(hex.slice(3,5),16);
    const b = parseInt(hex.slice(5,7),16);
    return {r,g,b};
  }

  // WCAG relative luminance
  function srgbToLin(v){
    v = v / 255;
    return (v <= 0.03928) ? (v/12.92) : Math.pow((v+0.055)/1.055, 2.4);
  }
  function luminance(hex){
    const {r,g,b} = hexToRgb(hex);
    const R = srgbToLin(r), G = srgbToLin(g), B = srgbToLin(b);
    return 0.2126*R + 0.7152*G + 0.0722*B;
  }
  function contrastRatio(fg, bg){
    const L1 = luminance(fg);
    const L2 = luminance(bg);
    const lighter = Math.max(L1, L2);
    const darker  = Math.min(L1, L2);
    return (lighter + 0.05) / (darker + 0.05);
  }

  function badge(text, ok){
    return `<span class="badge ${ok ? "pass" : "fail"}">${ok ? "PASS" : "FAIL"} • ${text}</span>`;
  }

  function setBadges(r){
    const rFixed = r.toFixed(2);

    // Normal: AA 4.5, AAA 7
    const nAA  = r >= 4.5;
    const nAAA = r >= 7.0;

    // Large: AA 3, AAA 4.5
    const lAA  = r >= 3.0;
    const lAAA = r >= 4.5;

    normalBadges.innerHTML = `
      ${badge("AA (4.5+)", nAA)} &nbsp; ${badge("AAA (7.0+)", nAAA)}
    `;
    largeBadges.innerHTML = `
      ${badge("AA (3.0+)", lAA)} &nbsp; ${badge("AAA (4.5+)", lAAA)}
    `;

    ratioEl.textContent = rFixed;
    hintEl.textContent = (r >= 4.5)
      ? "Good readability ✅ (AA for normal text passes)"
      : "Low contrast ⚠️ (Try darker text or lighter background)";
  }

  function applyPreview(fg, bg){
    preview.style.color = fg;
    preview.style.background = bg;

    // Button style based on same colors
    btnPreview.style.background = fg;
    btnPreview.style.color = bg;
  }

  async function copyResult(){
    const fg = textHex.value;
    const bg = bgHex.value;
    const r = contrastRatio(fg, bg).toFixed(2);

    const text =
`Contrast Checker Result
Text: ${fg}
Background: ${bg}
Contrast Ratio: ${r}

WCAG:
Normal Text: AA (4.5+) | AAA (7.0+)
Large Text:  AA (3.0+) | AAA (4.5+)`;

    try{
      await navigator.clipboard.writeText(text);
      showToast("Result Copied ✅");
    }catch{
      showToast("Copy failed");
    }
  }

  function update(){
    const fg = normalizeHex(textHex.value) || normalizeHex(textColor.value);
    const bg = normalizeHex(bgHex.value) || normalizeHex(bgColor.value);

    if (!fg || !bg){
      ratioEl.textContent = "—";
      hintEl.textContent = "Invalid HEX. Use format like #FFFFFF";
      normalBadges.innerHTML = "";
      largeBadges.innerHTML = "";
      return;
    }

    // sync inputs
    textHex.value = fg; textColor.value = fg;
    bgHex.value = bg; bgColor.value = bg;

    const r = contrastRatio(fg, bg);
    setBadges(r);
    applyPreview(fg, bg);
  }

  // events
  textColor.addEventListener("input", () => { textHex.value = textColor.value.toUpperCase(); update(); });
  bgColor.addEventListener("input", () => { bgHex.value = bgColor.value.toUpperCase(); update(); });

  textHex.addEventListener("input", update);
  bgHex.addEventListener("input", update);

  swapBtn.addEventListener("click", () => {
    const a = textHex.value, b = bgHex.value;
    textHex.value = b; bgHex.value = a;
    update();
  });

  copyBtn.addEventListener("click", copyResult);

  update();
</script>
</body>
</html>
